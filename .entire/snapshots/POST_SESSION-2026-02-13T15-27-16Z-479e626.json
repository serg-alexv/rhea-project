{
  "label": "POST_SESSION",
  "git": "479e626",
  "branch": "main",
  "status_porcelain": "MM .claude/settings.json\nD  .entire/snapshots/AUTO-2026-02-13T14-30-04Z-b0a382c.json\nD  .entire/snapshots/AUTO-2026-02-13T14-30-10Z-b0a382c.json\nD  .entire/snapshots/AUTO-2026-02-13T14-59-39Z-b0a382c.json\nD  .entire/snapshots/AUTO-2026-02-13T15-00-39Z-b0a382c.json\nD  .entire/snapshots/AUTO-2026-02-13T15-01-39Z-279f613.json\nD  .entire/snapshots/AUTO-2026-02-13T15-02-39Z-279f613.json\nD  .entire/snapshots/BOOT-2026-02-13T12-06-03Z-0ae9a9e.json\nD  .entire/snapshots/BOOT-2026-02-13T12-33-36Z-0ae9a9e.json\nD  .entire/snapshots/MANUAL-2026-02-13T14-58-54Z-checkpoint.json\nD  .entire/snapshots/OPUS_SESSION_1-2026-02-13T13-22-01Z-fe32995.json\nD  .rhea/session.json\n M docs/decisions.md\n M docs/models_catalog.md\nD  docs/soul.md\nD  docs/state_agents_core.md\nD  ops-setup-v2.sh\nD  ops-setup.sh\nD  scripts/rhea_watch.sh\nMM src/rhea_bridge.py\n?? .entire/snapshots/\n?? .rhea/\n?? docs/soul.md\n?? docs/state_agents_core.md\n?? ops-setup-v2.sh\n?? ops-setup.sh\n?? scripts/rhea_watch.sh",
  "files": {
    "docs_state": "# Rhea â€” compact state\n\n## Mission\nMind Blueprint factory: generate, evaluate, iterate on daily structure models using scientific rhythms, multi-model tribunal, and closed-loop planner.\n\n## Deliverables\n- Scientific paper \"Mathematics of Rhea\" â†’ outline ready (docs/prism_paper_outline.md)\n- iOS app \"Rhea\" (SwiftUI + HealthKit + Apple Watch)\n- Multi-provider bridge rhea_bridge.py â†’ âœ… implemented (src/rhea_bridge.py)\n\n## Status\n- Architecture: v3 fixed, 8 agents, Chronos Protocol\n- Bridge: implemented (6 providers, ask/tribunal/models_status)\n- Docs: normalized, prism paper outline created\n- Ops: ./rhea CLI + .entire snapshots/logs working\n- Git: PR#2 merged, main up to date\n\n## Next\n1. Wire bridge to .env keys â†’ first live tribunal\n2. iOS MVP scaffold (Stage 1)\n3. Feed prism_paper_outline.md to OpenAI Prism\n4. Connect entire.io cloud\n\n## Refs\n- Full state: docs/state_full.md\n- Decisions: docs/decisions.md\n- Architecture: docs/architecture.md\n",
    "root_state": "# Rhea â€” Project State\n> Last updated: 2026-02-13 | Session: initial commit\n\n## Status\n\n### âœ… Completed\n- Multi-model API bridge (rhea_bridge.py) â€” 6 providers, 400+ models\n- Chronos Protocol v3 â€” 8-agent system prompt (EN + RU)\n- Scientific foundation â€” polyvagal theory, HRV, interoception, ADHD-first\n- Cultural research â€” 16+ civilizations, hunter-gatherer calibration zero\n- Passive profiling methodology â€” no questionnaires\n- Gap analysis v2 â€” agent competency coverage\n- Azure Cosmos DB setup + diagnostics confirmed\n\n### ğŸ”„ In Progress\n- Three-tier memory architecture (GitHub + entire.io + compact protocol)\n- Agent teams prompt v3 refinement\n\n### ğŸ“‹ Next\n- AI model catalog (+ Jais, Grok via Azure free tier)\n- Agent teams v3 delegation run\n- Article: GPT Pro vs Cowork (delegate to agent)\n- iOS MVP scaffold (SwiftUI + HealthKit)\n- Biometric protocols (HRV, sleep, light exposure)\n\n## Key Decisions\n- **8 agents, not 10** â€” merged overlapping roles (v1â†’v3)\n- **Claude Opus 4 for reasoning agents (1,2,4,8), Sonnet 4 for execution (3,5,6,7)**\n- **ADHD-first design** â€” all UX assumes executive dysfunction as default\n- **Hunter-gatherer baseline** â€” every elite ritual reconstructs what foragers get free\n- **Multi-model bridge over single-provider lock-in** â€” cost 10-100x lower\n- **Passive profiling** â€” behavioral signals, not self-report questionnaires\n\n## Architecture Quick Ref\n```\n8 Agents â†’ Chronos Protocol v3 â†’ rhea_bridge.py â†’ 6 providers\nAgent 1: Quantitative Scientist (Opus 4)\nAgent 2: Life Sciences Integrator (Opus 4)\nAgent 3: Psychologist / Profile Whisperer (Sonnet 4)\nAgent 4: Linguist-Culturologist (Opus 4)\nAgent 5: Product Architect (Sonnet 4)\nAgent 6: Tech Lead (Sonnet 4 + Claude Code)\nAgent 7: Growth Strategist (Sonnet 4)\nAgent 8: Critical Reviewer & Conductor (Opus 4)\n```\n\n## Working Languages\nEN (primary docs) Â· RU (protocol, dialogue) Â· FR (future localization)\n",
    "docs_decisions": "# Rhea â€” Decision Log\n\n## ADR-001: Agent consolidation 10â†’8 (2026-02)\n**Context:** v1 had 10 agents with overlapping competencies.\n**Decision:** Merge Astronomer+Physicist+Mathematicianâ†’Agent 1; Chemist+Biologist+Neuroscienceâ†’Agent 2. Add Tech Lead (A6), Growth (A7). Preserve Critical Reviewer independence.\n**Rationale:** Eliminates handoff losses; body systems don't respect disciplinary boundaries.\n\n## ADR-002: Multi-model bridge over single provider (2026-02)\n**Context:** Need diverse AI perspectives; single-provider lock-in = cost and quality risk.\n**Decision:** Build rhea_bridge.py with 6 providers, 400+ models, tribunal mode.\n**Rationale:** 10-100x cost reduction via free tiers (Azure, DeepSeek, OpenRouter free models). Geographic diversity (US/CN/EU) reduces bias.\n\n## ADR-003: ADHD-first design (2026-02)\n**Context:** Neurotypical UX fails for executive dysfunction. ADHD users are canary in the coal mine â€” if it works for them, it works for everyone.\n**Decision:** All UX assumes ADHD as default: minimal decision load, passive profiling, body-first morning, no questionnaires.\n**Rationale:** Bruton et al. 2025 (diminished interoception in ADHD), LÃ¤ngle et al. 2025 (HRV/cognitive control).\n\n## ADR-004: Claude Opus for research, Sonnet for execution (2026-02)\n**Context:** Need to balance reasoning depth vs speed/cost.\n**Decision:** Opus 4 for Agents 1,2,4,8 (reasoning-intensive). Sonnet 4 for Agents 3,5,6,7 (execution).\n**Rationale:** Research/critique agents need long-context reasoning. Product/growth agents benefit from faster iteration.\n\n## ADR-005: Passive profiling methodology (2026-02)\n**Context:** Self-report questionnaires have known reliability issues, especially for ADHD users.\n**Decision:** Use behavioral signals (sleep patterns, movement, screen time, HRV) for profile construction. Zero questionnaires in core flow.\n**Rationale:** Reduces onboarding friction to near-zero; behavioral data more reliable than self-report.\n\n## ADR-006: Hunter-gatherer calibration zero (2026-02)\n**Context:** Need a universal baseline for \"optimal defaults\" across cultures.\n**Decision:** Hadza/San/Tsimane daily patterns as reference point. Every elite ritual across 16+ civilizations independently converges on this pattern.\n**Rationale:** Yetish et al. 2015, Wiessner 2014. The nervous system is one; culture-specific rituals are approximations of the same underlying biology.\n\n## ADR-007: Three-tier external memory (2026-02-13)\n**Context:** Claude's context window = RAM. 27 transcripts, 70% context spent on \"remembering.\"\n**Decision:** GitHub (state.md â‰¤2KB) as long-term memory, entire.io as episodic memory, compact protocol for session handoff.\n**Rationale:** Reduces context overhead from 70% to ~5%. Git provides continuity; entire.io provides searchable reasoning archive.\n\n## ADR-008: Tiered model routing with cheap-first default (2026-02-13)\n**Context:** ADR-004 assigned models per agent role, but lacked cost discipline. Most routine operations (summarisation, formatting, simple Q&A) don't need Opus-class models. Sessions were burning expensive tokens on trivial work.\n**Decision:** Introduce 4-tier routing in rhea_bridge.py: cheap (Sonnet/Flash/mini), balanced (GPT-4o/Gemini-2.5-Flash), expensive (Gemini-2.5-Pro/GPT-4.5/o3), reasoning (o4-mini/DeepSeek-R1). Default tier = cheap. Expensive/reasoning tiers require explicit justification. New methods: `ask_default()` (always cheap), `ask_tier()` (explicit tier), `tribunal()` now tier-aware.\n**Rationale:** Enforces cost discipline at the API layer. Cheap tier covers ~80% of agent work. Expensive models reserved for deep research, critique, and novel synthesis. Extends ADR-004 by making tier selection explicit rather than role-based.\n**Supersedes:** Partially extends ADR-004 (model assignment is now tier-first, role-second).\n",
    "root_decisions": "# Rhea â€” Decision Log\n\n## ADR-001: Agent consolidation 10â†’8 (2026-02)\n**Context:** v1 had 10 agents with overlapping competencies.\n**Decision:** Merge Astronomer+Physicist+Mathematicianâ†’Agent 1; Chemist+Biologist+Neuroscienceâ†’Agent 2. Add Tech Lead (A6), Growth (A7). Preserve Critical Reviewer independence.\n**Rationale:** Eliminates handoff losses; body systems don't respect disciplinary boundaries.\n\n## ADR-002: Multi-model bridge over single provider (2026-02)\n**Context:** Need diverse AI perspectives; single-provider lock-in = cost and quality risk.\n**Decision:** Build rhea_bridge.py with 6 providers, 400+ models, tribunal mode.\n**Rationale:** 10-100x cost reduction via free tiers (Azure, DeepSeek, OpenRouter free models). Geographic diversity (US/CN/EU) reduces bias.\n\n## ADR-003: ADHD-first design (2026-02)\n**Context:** Neurotypical UX fails for executive dysfunction. ADHD users are canary in the coal mine â€” if it works for them, it works for everyone.\n**Decision:** All UX assumes ADHD as default: minimal decision load, passive profiling, body-first morning, no questionnaires.\n**Rationale:** Bruton et al. 2025 (diminished interoception in ADHD), LÃ¤ngle et al. 2025 (HRV/cognitive control).\n\n## ADR-004: Claude Opus for research, Sonnet for execution (2026-02)\n**Context:** Need to balance reasoning depth vs speed/cost.\n**Decision:** Opus 4 for Agents 1,2,4,8 (reasoning-intensive). Sonnet 4 for Agents 3,5,6,7 (execution).\n**Rationale:** Research/critique agents need long-context reasoning. Product/growth agents benefit from faster iteration.\n\n## ADR-005: Passive profiling methodology (2026-02)\n**Context:** Self-report questionnaires have known reliability issues, especially for ADHD users.\n**Decision:** Use behavioral signals (sleep patterns, movement, screen time, HRV) for profile construction. Zero questionnaires in core flow.\n**Rationale:** Reduces onboarding friction to near-zero; behavioral data more reliable than self-report.\n\n## ADR-006: Hunter-gatherer calibration zero (2026-02)\n**Context:** Need a universal baseline for \"optimal defaults\" across cultures.\n**Decision:** Hadza/San/Tsimane daily patterns as reference point. Every elite ritual across 16+ civilizations independently converges on this pattern.\n**Rationale:** Yetish et al. 2015, Wiessner 2014. The nervous system is one; culture-specific rituals are approximations of the same underlying biology.\n\n## ADR-007: Three-tier external memory (2026-02-13)\n**Context:** Claude's context window = RAM. 27 transcripts, 70% context spent on \"remembering.\"\n**Decision:** GitHub (state.md â‰¤2KB) as long-term memory, entire.io as episodic memory, compact protocol for session handoff.\n**Rationale:** Reduces context overhead from 70% to ~5%. Git provides continuity; entire.io provides searchable reasoning archive.\n",
    "docs_architecture": "# Rhea â€” Architecture\n\n## What Is This\nAn iOS app that **reconstructs daily defaults** using cumulative knowledge of human civilizations. Not a habit tracker â€” a system that replaces unchosen cultural automatisms with a consciously designed environment, personalized to each user's neuroprofile.\n\n## Scientific Foundation\n| Domain | Core Insight | Sources |\n|--------|-------------|---------|\n| Polyvagal theory | Environment determines autonomic mode (ventral vagal â†’ sympathetic â†’ dorsal collapse) | Porges; Robe et al. 2021 |\n| HRV | Proxy for vagal tone, cognitive control, ADHD severity | LÃ¤ngle et al. 2025; Takeda et al. 2025 |\n| Interoception | Diminished in ADHD; without body-signal reading, decisions lack feedback | Bruton et al. 2025 |\n| Circadian anchoring | Hunter-gatherer sleep patterns (Hadza, San, Tsimane) as calibration zero | Yetish et al. 2015 |\n| Cultural universals | Elite rituals across 16+ civilizations reconstruct forager defaults | Wiessner 2014 (PNAS) |\n\n## 8-Agent System (Chronos Protocol v3)\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Agent 8: Conductor (Opus 4)        â”‚ â† orchestrates all\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ RESEARCH â”‚ PROFILE  â”‚ BUILD         â”‚\nâ”‚ A1 Quant â”‚ A3 Psych â”‚ A5 Product    â”‚\nâ”‚ A2 Bio   â”‚ A4 Ling  â”‚ A6 Tech Lead  â”‚\nâ”‚ (Opus 4) â”‚(mixed)   â”‚ A7 Growth     â”‚\nâ”‚          â”‚          â”‚ (Sonnet 4)    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n**Model assignment logic:** Reasoning-heavy (science, culture, critique) â†’ Opus 4. Execution-heavy (UX, code, growth) â†’ Sonnet 4.\n\n## Multi-Model Bridge (rhea_bridge.py)\n\n6 providers, 400+ models. Key functions: `ask()`, `tribunal()`, `models_status()`.\n\n| Provider | Models | Tier | Geography |\n|----------|--------|------|-----------|\n| OpenAI | GPT-5.2, o3, o4-mini | flagship/reasoning | US |\n| Gemini (Composio) | 2.5 Pro/Flash, 3 Pro/Flash | flagship/fast | US |\n| DeepSeek Direct | Chat, Reasoner | flagship/reasoning | CN |\n| OpenRouter | DeepSeek R1, Qwen3, Mistral, Llama, 400+ | all tiers | mixed |\n| HuggingFace | Jais, open-source | free | mixed |\n| Azure AI Foundry | Jais, Grok, Cohere, Llama4, Kimi | free tier | mixed |\n\n**Tribunal mode:** 5 independent model responses on same question â†’ compare perspectives.\n\n## Data Architecture\n- **Passive profiling:** behavioral signals from device sensors, no questionnaires\n- **Storage:** Azure Cosmos DB (confirmed operational)\n- **Biometrics:** HRV (Apple Watch), sleep, light exposure, activity\n- **Personalization:** Bayesian, Fourier analysis of biorhythms, topological sorting\n\n## Design Principles\n1. ADHD-first: assume executive dysfunction as default\n2. Passive over active: observe, don't interrogate\n3. Body before mind: morning = sensory contact, not decisions\n4. Minimum effective dose: optimal control theory\n5. Cultural roots: every recommendation traceable to source civilization\n",
    "root_architecture": "# Rhea â€” Architecture\n\n## What Is This\nAn iOS app that **reconstructs daily defaults** using cumulative knowledge of human civilizations. Not a habit tracker â€” a system that replaces unchosen cultural automatisms with a consciously designed environment, personalized to each user's neuroprofile.\n\n## Scientific Foundation\n| Domain | Core Insight | Sources |\n|--------|-------------|---------|\n| Polyvagal theory | Environment determines autonomic mode (ventral vagal â†’ sympathetic â†’ dorsal collapse) | Porges; Robe et al. 2021 |\n| HRV | Proxy for vagal tone, cognitive control, ADHD severity | LÃ¤ngle et al. 2025; Takeda et al. 2025 |\n| Interoception | Diminished in ADHD; without body-signal reading, decisions lack feedback | Bruton et al. 2025 |\n| Circadian anchoring | Hunter-gatherer sleep patterns (Hadza, San, Tsimane) as calibration zero | Yetish et al. 2015 |\n| Cultural universals | Elite rituals across 16+ civilizations reconstruct forager defaults | Wiessner 2014 (PNAS) |\n\n## 8-Agent System (Chronos Protocol v3)\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Agent 8: Conductor (Opus 4)        â”‚ â† orchestrates all\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ RESEARCH â”‚ PROFILE  â”‚ BUILD         â”‚\nâ”‚ A1 Quant â”‚ A3 Psych â”‚ A5 Product    â”‚\nâ”‚ A2 Bio   â”‚ A4 Ling  â”‚ A6 Tech Lead  â”‚\nâ”‚ (Opus 4) â”‚(mixed)   â”‚ A7 Growth     â”‚\nâ”‚          â”‚          â”‚ (Sonnet 4)    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n**Model assignment logic:** Reasoning-heavy (science, culture, critique) â†’ Opus 4. Execution-heavy (UX, code, growth) â†’ Sonnet 4.\n\n## Multi-Model Bridge (rhea_bridge.py)\n\n6 providers, 400+ models. Key functions: `ask()`, `tribunal()`, `models_status()`.\n\n| Provider | Models | Tier | Geography |\n|----------|--------|------|-----------|\n| OpenAI | GPT-5.2, o3, o4-mini | flagship/reasoning | US |\n| Gemini (Composio) | 2.5 Pro/Flash, 3 Pro/Flash | flagship/fast | US |\n| DeepSeek Direct | Chat, Reasoner | flagship/reasoning | CN |\n| OpenRouter | DeepSeek R1, Qwen3, Mistral, Llama, 400+ | all tiers | mixed |\n| HuggingFace | Jais, open-source | free | mixed |\n| Azure AI Foundry | Jais, Grok, Cohere, Llama4, Kimi | free tier | mixed |\n\n**Tribunal mode:** 5 independent model responses on same question â†’ compare perspectives.\n\n## Data Architecture\n- **Passive profiling:** behavioral signals from device sensors, no questionnaires\n- **Storage:** Azure Cosmos DB (confirmed operational)\n- **Biometrics:** HRV (Apple Watch), sleep, light exposure, activity\n- **Personalization:** Bayesian, Fourier analysis of biorhythms, topological sorting\n\n## Design Principles\n1. ADHD-first: assume executive dysfunction as default\n2. Passive over active: observe, don't interrogate\n3. Body before mind: morning = sensory contact, not decisions\n4. Minimum effective dose: optimal control theory\n5. Cultural roots: every recommendation traceable to source civilization\n"
  }
}
